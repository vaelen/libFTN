# RFC822 to/from FidoNet

## RFC822
- The details of RFC822 can be found in docs/rfc822.txt. However, here is the basic idea:
    - An RFC822 message is divided into two sections: a header and a message body
    - The header is a list of fields and each field is composed of a name and a value separated by a colon `:`.
    - Field names can not contain control characters or whitespace. 
    - A hyphen `-` is generally used to separate words in a field name.
    - Field values can contain most valid ASCII characters.
    - Field values can contain quoted strings.
    - A header field ends with a CRLF.
    - The header is divided from the message body by an empty line.
    - See [rfc822.txt](docs/rfc822.txt) for a more detailed description of the format.
- The library does not lose any information when converting from FidoNet to RFC822.
    - Line endings are converted, since RFC822 and FidoNet use different line endings.
    - FidoNet headers and control lines are converted to RFC822 headers and vice-versa.
    - A method for converting between the two formats can be found in [FSC-0007](docs/fsc-0007.002).

## Maildir
- The conversion application supports the maildir mailbox format.
    - The maildir format is a directory structure where each message is an individual file.
        - Directories inside a maildir:
            - `tmp` - Message files are written here first and then moved to their final location.
            - `new` - Incoming messages go here.
            - `cur` - These are messages that have already been read and are no longer new.
    - Additional directories may exist in a maildir structure.
      Such directories start with a period `.` and represent folders within the mailbox. 
      The folder hierarchy is denoted by the `.`s in the name. 
      For example, a directory named `Foo.Bar` is a folder named `Bar` underneath a folder named `Foo`.
- When converting a packet file into the maildir format: 
    - Only NetMail messages are processed
    - Message files use the following naming scheme:
        - If the message has a MSGID, that is used for the filename.
        - If the message does not have a MSGID, the file is named `FROM_TO_DATE` with 
          `FROM` being replaced yby the sender, `TO` being replaced by the receiver, and `DATE` 
          being replaced by the Date field if available or the current date and time if not. 
        - All special characters (including whitespace, colons, and slashes) are replaced 
          by an underscore in the file name.
    - Only messages which don't already exist somewhere in the maildir are imported.
        - The filename as defined above can be used to search for existing messages in the maildir.
    - New messages are placed in the `new` directory.
    - An optional command line parameter can be provided to set the internet domain name for incoming messages.

- When converting an RFC822 message into the FidoNet format:
    - The input is a list of files in RFC822 format. 
    - The converter does not take the original message's filename into account.
    - A new unique filename of 8 characters is generated for the packet.
    - All of the messages provided on the command line are placed into a single packet file.
    - An optional command line parameter can be provided for a "Sent" folder.
      If this parameter is provided, then RFC822 message files are be moved to the provided folder after they
      have been processed.


